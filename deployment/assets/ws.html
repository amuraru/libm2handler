<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <title>ViaSat Swarm Defender</title>

  <script type="text/javascript" src="js/jquery-1.5.js"></script>
  <script type="text/javascript" >
    debug = function(msg){
      $("ul#debug").append("<li>" + msg + "</li>");
    }
    var start_ws_handshake = function(){
      ws = new WebSocket("ws://localhost:6767/ws_handler");
      ws.onopen = function(){
        // alert("OPENED!");
      };
      ws.onerror = function(){
        alert("OH GOLLY");
      }
      ws.onmessage = function(data){
        debug(data.data);
        // alert("got data" + data);
      }
      ws.onclose = function(data){
        debug("CONNECTION CLOSED")
      }
      return false;
    };
    var send_data = function(){
      ws.send("hi");
      return false;
    }
    $(document).ready(function(){
      $("#initiate").submit(start_ws_handshake)
      }
    );
    $(document).ready(function(){
      $("#send").submit(send_data);
    });
  </script>
  </head>

  <body id="index" class="home">
    <form id="initiate" action="ws.html">
      <input type="submit">Initiate Connection</input>
    </form>
    <form id="send" action="ws.html">
      <input type="submit">Send Data</input>
    </form>
    <ul id="debug"></ul>
  </body>
</html>
